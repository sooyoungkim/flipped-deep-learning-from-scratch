============================================================
# common/util 의 im2col 의 동작 과정을 결과 하나하나 확인하며 보자.
# 실행한 예제는 util 맨 아래 main에 있다. (아래와 같다)
============================================================
x = np.array([[[[111, 112, 113, 114, 115, 116, 117],
                    [121, 122, 123, 124, 125, 126, 127],
                    [131, 132, 133, 134, 135, 136, 137],
                    [141, 142, 143, 144, 145, 146, 147],
                    [151, 152, 153, 154, 155, 156, 157],
                    [161, 162, 163, 164, 165, 166, 167],
                    [171, 172, 173, 174, 175, 176, 177]],
                   [[211, 212, 213, 214, 215, 216, 217],
                    [221, 222, 223, 224, 225, 226, 227],
                    [231, 232, 233, 234, 235, 236, 237],
                    [241, 242, 243, 244, 245, 246, 247],
                    [251, 252, 253, 254, 255, 256, 257],
                    [261, 262, 263, 264, 265, 266, 267],
                    [271, 272, 273, 274, 275, 276, 277]]
                   ]])
im2col(x, 3, 3, stride=2)
        -> filter : 3 X 3
        -> stride : 2
        -> (N, C, filter_h, filter_w, out_h, out_w) : (1, 2, 3, 3, 3, 3)
============================================================


==============================================
# 각 단계별 col이 채워지는 모습 확인
==============================================

(y, x)=( 0 , 0 ) (y_max, x_max)=( 6 , 6 )
img :
[
 [
     [
         [111 113 115]
         [131 133 135]
         [151 153 155]]

     [
         [211 213 215]
         [231 233 235]
         [251 253 255]]
 ]
]
=======================
(y, x)=( 0 , 1 ) (y_max, x_max)=( 6 , 7 )
img :
[[[[112 114 116]
   [132 134 136]
   [152 154 156]]

  [[212 214 216]
   [232 234 236]
   [252 254 256]]]]
=======================
(y, x)=( 0 , 2 ) (y_max, x_max)=( 6 , 8 )
img :
[[[[113 115 117]
   [133 135 137]
   [153 155 157]]

  [[213 215 217]
   [233 235 237]
   [253 255 257]]]]

# Channel[0]의 y[0] & Channel[1]의 y[0]
before :
[    # N (1)
     [     # C (2)
           [    # filter_h (3)
                #-> y 0
                [   # filter_w (3)
                    # -> x 0
                    [   # out_h, out_w (3,3)
                        [111. 113. 115.]
                        [131. 133. 135.]
                        [151. 153. 155.]]
                    # -> x 1
                    [
                        [112. 114. 116.]
                        [132. 134. 136.]
                        [152. 154. 156.]]
                    # -> x 2
                    [
                        [113. 115. 117.]
                        [133. 135. 137.]
                        [153. 155. 157.]]
                ]
                # -> y 1
                [
                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]
                ]
                # -> y 2
                [
                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]
                ]
          ]
          [     # -> y 0
                [   # -> x 0
                    [   # out_h, out_w
                        [211. 213. 215.]
                        [231. 233. 235.]
                        [251. 253. 255.]]
                    # -> x 1
                    [
                        [212. 214. 216.]
                        [232. 234. 236.]
                        [252. 254. 256.]]
                    # -> x 2
                    [
                        [213. 215. 217.]
                        [233. 235. 237.]
                        [253. 255. 257.]]
                ]
                # -> y 1
                [
                   [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]
                ]
                # -> y 2
                [
                   [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]

                    [[  0.   0.   0.]
                     [  0.   0.   0.]
                     [  0.   0.   0.]]
                ]
          ]
     ]
]
=======================
(y, x)=( 1 , 0 ) (y_max, x_max)=( 7 , 6 )
img :
[[[[121 123 125]
   [141 143 145]
   [161 163 165]]

  [[221 223 225]
   [241 243 245]
   [261 263 265]]]]
=======================
(y, x)=( 1 , 1 ) (y_max, x_max)=( 7 , 7 )
img :
[[[[122 124 126]
   [142 144 146]
   [162 164 166]]

  [[222 224 226]
   [242 244 246]
   [262 264 266]]]]
=======================
(y, x)=( 1 , 2 ) (y_max, x_max)=( 7 , 8 )
img :
[[[[123 125 127]
   [143 145 147]
   [163 165 167]]

  [[223 225 227]
   [243 245 247]
   [263 265 267]]]]

# Channel[0]의 y[1] & Channel[1]의 y[1]
before :
[[[[[[111. 113. 115.]
     [131. 133. 135.]
     [151. 153. 155.]]

    [[112. 114. 116.]
     [132. 134. 136.]
     [152. 154. 156.]]

    [[113. 115. 117.]
     [133. 135. 137.]
     [153. 155. 157.]]]


   [[[121. 123. 125.]
     [141. 143. 145.]
     [161. 163. 165.]]

    [[122. 124. 126.]
     [142. 144. 146.]
     [162. 164. 166.]]

    [[123. 125. 127.]
     [143. 145. 147.]
     [163. 165. 167.]]]


   [[[  0.   0.   0.]
     [  0.   0.   0.]
     [  0.   0.   0.]]

    [[  0.   0.   0.]
     [  0.   0.   0.]
     [  0.   0.   0.]]

    [[  0.   0.   0.]
     [  0.   0.   0.]
     [  0.   0.   0.]]]]



  [[[[211. 213. 215.]
     [231. 233. 235.]
     [251. 253. 255.]]

    [[212. 214. 216.]
     [232. 234. 236.]
     [252. 254. 256.]]

    [[213. 215. 217.]
     [233. 235. 237.]
     [253. 255. 257.]]]


   [[[221. 223. 225.]
     [241. 243. 245.]
     [261. 263. 265.]]

    [[222. 224. 226.]
     [242. 244. 246.]
     [262. 264. 266.]]

    [[223. 225. 227.]
     [243. 245. 247.]
     [263. 265. 267.]]]


   [[[  0.   0.   0.]
     [  0.   0.   0.]
     [  0.   0.   0.]]

    [[  0.   0.   0.]
     [  0.   0.   0.]
     [  0.   0.   0.]]

    [[  0.   0.   0.]
     [  0.   0.   0.]
     [  0.   0.   0.]]]]]]
=======================
(y, x)=( 2 , 0 ) (y_max, x_max)=( 8 , 6 )
img :
[[[[131 133 135]
   [151 153 155]
   [171 173 175]]

  [[231 233 235]
   [251 253 255]
   [271 273 275]]]]
=======================
(y, x)=( 2 , 1 ) (y_max, x_max)=( 8 , 7 )
img :
[[[[132 134 136]
   [152 154 156]
   [172 174 176]]

  [[232 234 236]
   [252 254 256]
   [272 274 276]]]]
=======================
(y, x)=( 2 , 2 ) (y_max, x_max)=( 8 , 8 )
img :
[[[[133 135 137]
   [153 155 157]
   [173 175 177]]

  [[233 235 237]
   [253 255 257]
   [273 275 277]]]]          <-- 필터 적용 영역별로 하나씩 가져온다.

# Channel[0]의 y[2] & Channel[1]의 y[2]
before :
            # "필터 적용 영역의 row별"로 묶여진다.


     같은 위치끼리 필터 3X3의 적용영역별 1번째 row를 나타낸다. 예) (111, 112, 113), (131, 132, 133), (151, 152, 153)
       |
[[[[[[111. 113. 115.]
     [131. 133. 135.]
     [151. 153. 155.]]      <-- 채널1, 필터 3X3 적용 영역별 1번째 row의 1번째 값
    [[112. 114. 116.]
     [132. 134. 136.]
     [152. 154. 156.]]      <-- 채널1, 필터 3X3 적용 영역별 1번째 row의 2번째 값
    [[113. 115. 117.]
     [133. 135. 137.]
     [153. 155. 157.]]]     <-- 채널1, 필터 3X3 적용 영역별 1번째 row의 3번째 값

      같은 위치끼리 필터 3X3의 적용역역별 2번째 row를 나타낸다. 예) (123, 124, 125), (143, 144, 145), (163, 164, 165)
        |
   [[[121. 123. 125.]
     [141. 143. 145.]
     [161. 163. 165.]]      <-- 채널1, 필터 3X3 적용 영역별 2번째 row의 1번째 값
    [[122. 124. 126.]
     [142. 144. 146.]
     [162. 164. 166.]]      <-- 채널1, 필터 3X3 적용 영역별 2번째 row의 2번째 값
    [[123. 125. 127.]
     [143. 145. 147.]
     [163. 165. 167.]]]     <-- 채널1, 필터 3X3 적용 영역별 2번째 row의 3번째 값

     같은 위치끼리 필터 3X3의 적용영역별 3번째 row를 나타낸다.
       |
   [[[131. 133. 135.]
     [151. 153. 155.]
     [171. 173. 175.]]      <-- 채널1, 필터 3X3 적용 영역별 3번째 row의 1번째 값
    [[132. 134. 136.]
     [152. 154. 156.]
     [172. 174. 176.]]      <-- 채널1, 필터 3X3 적용 영역별 3번째 row의 2번째 값
    [[133. 135. 137.]
     [153. 155. 157.]
     [173. 175. 177.]]]]    <-- 채널1, 필터 3X3 적용 영역별 3번째 row의 3번째 값


  [[[[211. 213. 215.]
     [231. 233. 235.]
     [251. 253. 255.]]
    [[212. 214. 216.]
     [232. 234. 236.]
     [252. 254. 256.]]
    [[213. 215. 217.]
     [233. 235. 237.]
     [253. 255. 257.]]]     <-- 채널 2, (필터 3X3 적용 영역별 1번째 row)

   [[[221. 223. 225.]
     [241. 243. 245.]
     [261. 263. 265.]]
    [[222. 224. 226.]
     [242. 244. 246.]
     [262. 264. 266.]]
    [[223. 225. 227.]
     [243. 245. 247.]
     [263. 265. 267.]]]     <-- 채널 2, (필터 3X3 적용 영역별 2번째 row)

   [[[231. 233. 235.]
     [251. 253. 255.]
     [271. 273. 275.]]
    [[232. 234. 236.]
     [252. 254. 256.]
     [272. 274. 276.]]
    [[233. 235. 237.]
     [253. 255. 257.]
     [273. 275. 277.]]]]]]  <-- 채널 2, (필터 3X3 적용 영역별 3번째 row)


==============================================
# col을 transpose 한 후 확인
==============================================
# 축 변경 : col.transpose(0, 4, 5, 1, 2, 3) : "필터 적용 영역별"로 묶여진다.
#         (N, C, filter_h, filter_w, out_h, out_w) -> (N, out_h, out_w, filter_h, filter_w)

[[[[[[111. 112. 113.]
     [121. 122. 123.]
     [131. 132. 133.]]     <----- 채널 1의 필터 1번째 적용 영역
    [[211. 212. 213.]
     [221. 222. 223.]
     [231. 232. 233.]]]    <----- 채널 2의 필터 1번째 적용 영역

   [[[113. 114. 115.]
     [123. 124. 125.]
     [133. 134. 135.]]     <----- 채널 1의 필터 2번쨰 적용 영역
    [[213. 214. 215.]
     [223. 224. 225.]
     [233. 234. 235.]]]    <----- 채널 2의 필터 2번째 적용 영역

   [[[115. 116. 117.]
     [125. 126. 127.]
     [135. 136. 137.]]     <----- 채널 1의 필터 3번째 적용 영역
    [[215. 216. 217.]
     [225. 226. 227.]
     [235. 236. 237.]]]]   <----- 채널 2의 필터 3번쨰 적용 영역


  [[[[131. 132. 133.]
     [141. 142. 143.]
     [151. 152. 153.]]
    [[231. 232. 233.]
     [241. 242. 243.]
     [251. 252. 253.]]]

   [[[133. 134. 135.]
     [143. 144. 145.]
     [153. 154. 155.]]
    [[233. 234. 235.]
     [243. 244. 245.]
     [253. 254. 255.]]]

   [[[135. 136. 137.]
     [145. 146. 147.]
     [155. 156. 157.]]
    [[235. 236. 237.]
     [245. 246. 247.]
     [255. 256. 257.]]]]


  [[[[151. 152. 153.]
     [161. 162. 163.]
     [171. 172. 173.]]
    [[251. 252. 253.]
     [261. 262. 263.]
     [271. 272. 273.]]]

   [[[153. 154. 155.]
     [163. 164. 165.]
     [173. 174. 175.]]
    [[253. 254. 255.]
     [263. 264. 265.]
     [273. 274. 275.]]]

   [[[155. 156. 157.]
     [165. 166. 167.]
     [175. 176. 177.]]
    [[255. 256. 257.]
     [265. 266. 267.]
     [275. 276. 277.]]]]]]

==============================================
# 2차원 배열로 변환
# reshape(N * out_h * out_w, -1)
# N * out_h * out_w 개의 묶음으로 만든다.
==============================================
after :
[    |------------------ 채널 1 ------------------| |------------------ 채널 2 ------------------|
     [111. 112. 113. 121. 122. 123. 131. 132. 133. 211. 212. 213. 221. 222. 223. 231. 232. 233.] <-- 필터 1번째 적용영역
     [113. 114. 115. 123. 124. 125. 133. 134. 135. 213. 214. 215. 223. 224. 225. 233. 234. 235.] <-- 필터 2번째 적용영역
     [115. 116. 117. 125. 126. 127. 135. 136. 137. 215. 216. 217. 225. 226. 227. 235. 236. 237.] <-- 필터 3번째 적용영역
     [131. 132. 133. 141. 142. 143. 151. 152. 153. 231. 232. 233. 241. 242. 243. 251. 252. 253.]
     [133. 134. 135. 143. 144. 145. 153. 154. 155. 233. 234. 235. 243. 244. 245. 253. 254. 255.]
     [135. 136. 137. 145. 146. 147. 155. 156. 157. 235. 236. 237. 245. 246. 247. 255. 256. 257.]
     [151. 152. 153. 161. 162. 163. 171. 172. 173. 251. 252. 253. 261. 262. 263. 271. 272. 273.]
     [153. 154. 155. 163. 164. 165. 173. 174. 175. 253. 254. 255. 263. 264. 265. 273. 274. 275.]
     [155. 156. 157. 165. 166. 167. 175. 176. 177. 255. 256. 257. 265. 266. 267. 275. 276. 277.]
]


필터 : 3 X 3 사용,
스트라이드 : 2
원래 형상 :
x = np.array([[[[111, 112, 113, 114, 115, 116, 117],
                [121, 122, 123, 124, 125, 126, 127],
                [131, 132, 133, 134, 135, 136, 137],
                [141, 142, 143, 144, 145, 146, 147],
                [151, 152, 153, 154, 155, 156, 157],
                [161, 162, 163, 164, 165, 166, 167],
                [171, 172, 173, 174, 175, 176, 177]],
               [[211, 212, 213, 214, 215, 216, 217],
                [221, 222, 223, 224, 225, 226, 227],
                [231, 232, 233, 234, 235, 236, 237],
                [241, 242, 243, 244, 245, 246, 247],
                [251, 252, 253, 254, 255, 256, 257],
                [261, 262, 263, 264, 265, 266, 267],
                [271, 272, 273, 274, 275, 276, 277]]
               ]])